<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"/>
  <title>Paris – Lycées → collèges secteur 1 (carte interactive)</title>

  <!-- Leaflet via CDN : aucune installation de module -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <style>
    :root{
      --border:#ddd;
      --muted:#666;
      --bg:#fff;
      --chip:#f2f2f2;
      --card:#fff;
      --shadow: 0 10px 30px rgba(0,0,0,.12);
      --radius: 14px;
      --tap: 44px;
    }

    html, body { height:100%; margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); }
    /* Desktop layout */
    #app { height:100%; display:grid; grid-template-columns: 420px 1fr; }
    #sidebar { border-right:1px solid var(--border); padding: 12px; overflow:auto; background: var(--bg); }
    #map { height:100%; width:100%; }

    h1{ font-size:16px; margin:0 0 6px; }
    .hint{ font-size:12px; color:#555; line-height:1.35; margin-bottom:10px; }
    .row{ display:flex; gap:10px; align-items:center; flex-wrap:wrap; }
    .search{ display:flex; gap:8px; margin: 10px 0 12px; }
    input[type="text"]{
      width:100%;
      padding: 10px 12px;
      border:1px solid #ccc;
      border-radius: 12px;
      font-size: 14px;
      height: var(--tap);
      box-sizing: border-box;
    }
    button{
      padding: 10px 12px;
      border:1px solid #ccc;
      background:#f7f7f7;
      border-radius: 12px;
      cursor:pointer;
      height: var(--tap);
      font-size: 14px;
    }
    button:hover{ background:#eee; }
    button:disabled{ cursor:not-allowed; opacity:.55; }

    .card{
      padding: 12px;
      border: 1px solid #eee;
      border-radius: var(--radius);
      margin-bottom: 10px;
      background: var(--card);
    }
    .card strong{ display:block; font-size:14px; }
    .meta{ font-size:12px; color: var(--muted); margin-top:4px; }
    .badge{
      font-size:12px;
      padding: 3px 10px;
      border-radius: 999px;
      background: var(--chip);
      border: 1px solid #e6e6e6;
    }
    .warn{ color:#8a2b2b; }
    .ok{ color:#1f6b3a; }
    ul{ margin: 6px 0 0; padding-left: 18px; }
    li{ margin: 2px 0; }
    label.opt{ font-size: 12px; color:#333; display:flex; gap:10px; align-items:center; }
    label.opt input{ transform: scale(1.1); }

    /* Leaflet popup ergonomics on mobile */
    .leaflet-popup-content { margin: 10px 12px; }
    .leaflet-popup-content-wrapper { border-radius: 14px; }
    .leaflet-container a.leaflet-popup-close-button { width: 34px; height: 34px; font-size: 20px; }

    /* ---------- Mobile: bottom sheet overlay ---------- */
    @media (max-width: 900px){
      #app{ grid-template-columns: 1fr; }
      #sidebar{
        position: fixed;
        left: 0; right: 0;
        bottom: 0;
        border-right: none;
        border-top: 1px solid var(--border);
        border-radius: 18px 18px 0 0;
        box-shadow: var(--shadow);
        padding: 10px 12px calc(10px + env(safe-area-inset-bottom));
        max-height: 68vh;
        overflow: hidden;
        z-index: 1000;
      }
      #sidebar.collapsed{
        max-height: 64px;
        overflow: hidden;
      }
      .sheet-head{
        display:flex;
        align-items:center;
        justify-content: space-between;
        gap: 10px;
        padding: 6px 2px 10px;
      }
      .grabber{
        width: 46px;
        height: 5px;
        border-radius: 999px;
        background: #d8d8d8;
        margin: 0 auto 6px;
      }
      .sheet-title{
        display:flex;
        flex-direction: column;
        gap: 2px;
        flex: 1;
        min-width: 0;
        user-select:none;
        -webkit-tap-highlight-color: transparent;
      }
      .sheet-title .t{
        font-weight: 700;
        font-size: 14px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .sheet-title .s{
        font-size: 12px;
        color: var(--muted);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }
      .sheet-actions{
        display:flex;
        gap: 8px;
        align-items: center;
      }
      .iconbtn{
        width: 44px;
        height: 44px;
        padding: 0;
        border-radius: 14px;
        display:flex;
        align-items:center;
        justify-content:center;
        user-select: none;
        -webkit-tap-highlight-color: transparent;
      }
      #sidebar .sheet-body{
        overflow:auto;
        max-height: calc(68vh - 64px);
        padding-right: 2px;
      }
      #sidebar.collapsed .sheet-body{ display:none; }
      button{ height: 46px; border-radius: 14px; }
      input[type="text"]{ height: 46px; border-radius: 14px; }
      .card{ margin-bottom: 12px; }
    }
  </style>
</head>

<body>
<div id="app">
  <div id="sidebar" class="collapsed">
    <div class="grabber" id="grabber" aria-hidden="true"></div>

    <div class="sheet-head">
      <div class="sheet-title" role="button" id="toggleSheet" aria-label="Ouvrir/fermer le panneau">
        <div class="t">Lycées de Paris → collèges (secteur 1)</div>
        <div class="s">Tape pour rechercher & sélectionner</div>
      </div>
      <div class="sheet-actions">
        <button class="iconbtn" id="btnLocate" title="Recentrer sur Paris" aria-label="Recentrer sur Paris">⌖</button>
        <button class="iconbtn" id="btnCollapse" title="Réduire/agrandir" aria-label="Réduire/agrandir">▴</button>
      </div>
    </div>

    <div class="sheet-body">
      <div class="hint" style="margin-top:0;">
        HTML unique, consultable en local. Positions : JSON (dép. 75). Fond OpenStreetMap : connexion requise.
      </div>

      <div class="row" style="margin-bottom:10px;">
        <span class="badge">Affichés: <span id="countShown">0</span></span>
        <span class="badge">Total: <span id="countTotal">0</span></span>
      </div>

      <div class="row" style="margin-bottom:8px;">
        <label class="opt" title="Quand tu cliques sur un lycée (liste/marker), la popup s'ouvre automatiquement.">
          <input type="checkbox" id="optAutoPopup" checked />
          Option 1 : ouvrir directement la popup
        </label>
      </div>
      <div class="row" style="margin-bottom:10px;">
        <label class="opt" title="Si un lycée n'est pas géolocalisé, on affiche la liste des collèges directement sous son nom dans la liste.">
          <input type="checkbox" id="optInlineMissing" checked />
          Option 2 : afficher les collèges sous le nom si non géolocalisé
        </label>
      </div>

      <div class="search">
        <input id="filter" type="text" placeholder="Rechercher un lycée (ex: CONDORCET)"/>
        <button id="reset">Reset</button>
      </div>

      <div id="list"></div>
    </div>
  </div>

  <div id="map"></div>
</div>

<script>
  const GEO = {"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.394315498648954, 48.847927308794425]}, "properties": {"lycee_csv": "ARAGO", "nom_etablissement": "Lycée Arago", "code_uai": "0750680G", "adresse": "4 place DE LA NATION, 75012 Paris 12e Arrondissement", "nb_colleges": 17, "colleges": ["ANNE FRANK", "BEAUMARCHAIS", "FLORA TRISTAN", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VERLAINE", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "PILATRE DE ROZIER", "ROBERT DOISNEAU", "THOMAS MANN"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3154764283937124, 48.8955306966347]}, "properties": {"lycee_csv": "BALZAC", "nom_etablissement": "Lycée international de Paris Honoré de Balzac", "code_uai": "0750705J", "adresse": "118 boulevard Bessières, 75849 Paris 17e Arrondissement", "nb_colleges": 10, "colleges": ["ANTOINE COYSEVOX", "BORIS VIAN", "CARNOT", "HECTOR BERLIOZ", "HONORE DE BALZAC", "LA ROSE BLANCHE", "MAURICE UTRILLO", "PIERRE DE RONSARD", "STEPHANE MALLARME", "SUZANNE LACORE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.377938887612686, 48.88112074883683]}, "properties": {"lycee_csv": "BERGSON", "nom_etablissement": "Lycée Henri Bergson (enseignement secondaire)", "code_uai": "0750711R", "adresse": "27 RUE EDOUARD PAILLERON, 75019 Paris 19e Arrondissement", "nb_colleges": 16, "colleges": ["CHARLES PEGUY", "CLAUDE CHAPPE", "EDMOND MICHELET", "EDOUARD PAILLERON", "FRANCOISE DOLTO", "FRANCOISE SELIGMANN", "GEORGES BRASSENS", "GEORGES MELIES", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "LEON GAMBETTA", "LUCIE ET RAYMOND AUBRAC", "SONIA DELAUNAY", "VALMY", "W.A. MOZART"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.406968028836891, 48.84781801734053]}, "properties": {"lycee_csv": "BOUCHER", "nom_etablissement": "Lycée Hélène Boucher", "code_uai": "0750714U", "adresse": "75 COURS DE VINCENNES, 75020 Paris 20e Arrondissement", "nb_colleges": 18, "colleges": ["ANNE FRANK", "CHARLES PEGUY", "COLETTE BESSON", "FLORA TRISTAN", "FRANCOISE DOLTO", "GEORGES COURTELINE", "GEORGES ROUAULT", "GERMAINE TILLION", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-BAPTISTE CLEMENT", "LEON GAMBETTA", "LUCIE FAURE", "PAUL VALERY", "PIERRE MENDES FRANCE", "PILATRE DE ROZIER"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3117184295922955, 48.843450595841645]}, "properties": {"lycee_csv": "BUFFON", "nom_etablissement": "Lycée Buffon", "code_uai": "0750693W", "adresse": "16 boulevard Pasteur, 75015 Paris 15e Arrondissement", "nb_colleges": 15, "colleges": ["ALBERTO GIACOMETTI", "ANDRE CITROEN", "BUFFON", "CAMILLE SEE", "CLAUDE DEBUSSY", "DE STAEL", "ELSA TRIOLET", "FRANCOIS VILLON", "GEORGE SAND", "GEORGES DUHAMEL", "GUILLAUME APOLLINAIRE", "JULES ROMAINS", "MODIGLIANI", "MOULIN DES PRES", "VICTOR DURUY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.254942359765863, 48.8419754563088]}, "properties": {"lycee_csv": "C. BERNARD", "nom_etablissement": "Lycée Claude Bernard", "code_uai": "0750698B", "adresse": "1 avenue DU PARC DES PRINCES, 75016 Paris 16e Arrondissement", "nb_colleges": 7, "colleges": ["CAMILLE SEE", "CLAUDE BERNARD", "CLAUDE DEBUSSY", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3623234040857297, 48.82743361046444]}, "properties": {"lycee_csv": "C. MONET", "nom_etablissement": "Lycée Claude Monet", "code_uai": "0750683K", "adresse": "1 rue DU DOCTEUR MAGNAN, 75013 Paris 13e Arrondissement", "nb_colleges": 11, "colleges": ["CAMILLE CLAUDEL", "CLAUDE MONET", "ELSA TRIOLET", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GUSTAVE FLAUBERT", "MOULIN DES PRES", "RODIN", "THOMAS MANN"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.2969840860656223, 48.84299077854994]}, "properties": {"lycee_csv": "CAMILLE SEE", "nom_etablissement": "Lycée Camille Sée", "code_uai": "0750694X", "adresse": "11 rue LEON LHERMITTE, 75015 Paris 15e Arrondissement", "nb_colleges": 13, "colleges": ["ALBERTO GIACOMETTI", "ANDRE CITROEN", "BUFFON", "CAMILLE SEE", "CLAUDE DEBUSSY", "DE STAEL", "FRANCOIS VILLON", "GEORGES DUHAMEL", "JACQUES PREVERT", "JULES ROMAINS", "MODIGLIANI", "MONTAIGNE", "VICTOR DURUY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.307843373633904, 48.8844772461129]}, "properties": {"lycee_csv": "CARNOT", "nom_etablissement": "Lycée Carnot", "code_uai": "0750704H", "adresse": "145 BOULEVARD MALESHERBES, 75017 Paris 17e Arrondissement", "nb_colleges": 12, "colleges": ["ANDRE MALRAUX", "BORIS VIAN", "CARNOT", "CHAPTAL", "JACQUES DECOUR", "LA ROSE BLANCHE", "MAURICE UTRILLO", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "STEPHANE MALLARME", "YVONNE LE TAC"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3196885071009623, 48.881738320109136]}, "properties": {"lycee_csv": "CHAPTAL", "nom_etablissement": "Lycée Chaptal", "code_uai": "0750663N", "adresse": "45 boulevard DES BATIGNOLLES, 75008 Paris 8e Arrondissement", "nb_colleges": 16, "colleges": ["AIME CESAIRE", "BORIS VIAN", "CARNOT", "CHAPTAL", "CONDORCET", "EDOUARD PAILLERON", "GEORGES CLEMENCEAU", "HENRI BERGSON", "JACQUES DECOUR", "JULES FERRY", "LA GRANGE AUX BELLES", "MARX DORMOY", "OCTAVE GREARD", "PIERRE DE RONSARD", "ROLAND DORGELES", "SONIA DELAUNAY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3604935218748184, 48.854235652843826]}, "properties": {"lycee_csv": "CHARLEMAGNE", "nom_etablissement": "Lycée Charlemagne", "code_uai": "0750652B", "adresse": "14 rue Charlemagne, 75004 Paris 4e Arrondissement", "nb_colleges": 15, "colleges": ["BEAUMARCHAIS", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "EVARISTE GALOIS", "FRANCOIS COUPERIN", "GABRIEL FAURE", "GEORGES COURTELINE", "HENRI IV", "JEAN-BAPTISTE POQUELIN", "LUCIE ET RAYMOND AUBRAC", "PIERRE ALVISET", "PIERRE-JEAN DE BERANGER", "ROBERT DOISNEAU", "VOLTAIRE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3634152185070483, 48.88270546564568]}, "properties": {"lycee_csv": "COLBERT", "nom_etablissement": "Lycée Colbert", "code_uai": "0750673Z", "adresse": "27 rue DE CHATEAU LANDON, 75010 Paris 10e Arrondissement", "nb_colleges": 26, "colleges": ["AIME CESAIRE", "BEAUMARCHAIS", "CLAUDE CHAPPE", "COLETTE BESSON", "CONDORCET", "DANIEL MAYER", "EDGAR VARESE", "EDMOND MICHELET", "EDOUARD PAILLERON", "FRANCOISE SELIGMANN", "GEORGES MELIES", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "JEAN-BAPTISTE CLEMENT", "JEAN-BAPTISTE POQUELIN", "LA GRANGE AUX BELLES", "LAMARTINE", "LOUISE MICHEL", "LUCIE ET RAYMOND AUBRAC", "MARX DORMOY", "SONIA DELAUNAY", "SUZANNE LACORE", "VALMY", "VOLTAIRE", "W.A. MOZART"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3269329145962345, 48.874803117835995]}, "properties": {"lycee_csv": "CONDORCET", "nom_etablissement": "Lycée Condorcet", "code_uai": "0750667T", "adresse": "8 RUE DU HAVRE, 75009 Paris 9e Arrondissement", "nb_colleges": 13, "colleges": ["AIME CESAIRE", "ANDRE MALRAUX", "ANTOINE COYSEVOX", "CONDORCET", "DANIEL MAYER", "EDMOND MICHELET", "GERARD PHILIPE", "HECTOR BERLIOZ", "JULES FERRY", "LA ROSE BLANCHE", "LAMARTINE", "MARIE CURIE", "SUZANNE LACORE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.39587754134031, 48.88151208852299]}, "properties": {"lycee_csv": "DIDEROT", "nom_etablissement": "Lycée polyvalent Diderot", "code_uai": "0750712S", "adresse": "61 rue DAVID D'ANGERS, 75019 Paris 19e Arrondissement", "nb_colleges": 14, "colleges": ["CHARLES PEGUY", "CLAUDE CHAPPE", "EDGAR VARESE", "EDOUARD PAILLERON", "FLORA TRISTAN", "GEORGES BRASSENS", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "LOUISE MICHEL", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "SUZANNE LACORE", "W.A. MOZART"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.392412630364061, 48.85440198778214]}, "properties": {"lycee_csv": "DORIAN", "nom_etablissement": "Lycée polyvalent Dorian", "code_uai": "0750676C", "adresse": "74 avenue PHILIPPE AUGUSTE, 75011 Paris 11e Arrondissement", "nb_colleges": 15, "colleges": ["ALAIN FOURNIER", "ANNE FRANK", "GEORGES COURTELINE", "GERMAINE TILLION", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PAUL VERLAINE", "ROBERT DOISNEAU", "VOLTAIRE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3369360393461895, 48.83176633760908]}, "properties": {"lycee_csv": "E. DUBOIS", "nom_etablissement": "Lycée Émile Dubois", "code_uai": "0750692V", "adresse": "14 rue Emile Dubois, 75014 Paris 14e Arrondissement", "nb_colleges": 11, "colleges": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "EVARISTE GALOIS", "FRANCOIS VILLON", "GEORGES BRAQUE", "JEAN MOULIN", "MODIGLIANI", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "SAINT-EXUPERY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3398744815433177, 48.881251468979656]}, "properties": {"lycee_csv": "E. QUINET", "nom_etablissement": "Lycée polyvalent Edgar Quinet", "code_uai": "0750671X", "adresse": "63 rue DES MARTYRS, 75009 Paris 9e Arrondissement", "nb_colleges": 12, "colleges": ["ANDRE MALRAUX", "BERNARD PALISSY", "CARNOT", "CHAPTAL", "CONDORCET", "JACQUES DECOUR", "LA ROSE BLANCHE", "MARX DORMOY", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "YVONNE LE TAC"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.340812500406945, 48.853251977501536]}, "properties": {"lycee_csv": "FENELON", "nom_etablissement": "Lycée Fénelon", "code_uai": "0750660K", "adresse": "2 rue de l'Eperon, 75006 Paris 6e Arrondissement", "nb_colleges": 12, "colleges": ["BERNARD PALISSY", "EDGAR VARESE", "GEORGES BRASSENS", "HENRI IV", "JACQUES PREVERT", "LA GRANGE AUX BELLES", "LAVOISIER", "MONTAIGNE", "SONIA DELAUNAY", "THOMAS MANN", "VALMY", "VICTOR HUGO"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.361407304319577, 48.824045272807375]}, "properties": {"lycee_csv": "G.FAURE", "nom_etablissement": "Lycée Gabriel Fauré", "code_uai": "0750684L", "adresse": "81 AVENUE DE CHOISY, 75013 Paris 13e Arrondissement", "nb_colleges": 11, "colleges": ["CAMILLE CLAUDEL", "CLAUDE MONET", "ELSA TRIOLET", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GUSTAVE FLAUBERT", "MOULIN DES PRES", "RODIN", "THOMAS MANN"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.2565778962761875, 48.845190990860424]}, "properties": {"lycee_csv": "J. DE LA FONTAINE", "nom_etablissement": "Lycée Jean de La Fontaine", "code_uai": "0750702F", "adresse": "1 place DE LA PORTE MOLITOR, 75016 Paris 16e Arrondissement", "nb_colleges": 7, "colleges": ["ANDRE CITROEN", "CLAUDE BERNARD", "GUILLAUME APOLLINAIRE", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.2794516898235146, 48.86556113280372]}, "properties": {"lycee_csv": "J. DE SAILLY", "nom_etablissement": "Lycée Janson de Sailly", "code_uai": "0750699C", "adresse": "106 rue DE LA POMPE, 75016 Paris 16e Arrondissement", "nb_colleges": 12, "colleges": ["ANDRE MALRAUX", "BORIS VIAN", "CARNOT", "CHAPTAL", "CLAUDE BERNARD", "DE STAEL", "GUILLAUME APOLLINAIRE", "HONORE DE BALZAC", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3434236459416136, 48.881485926285514]}, "properties": {"lycee_csv": "J. DECOUR", "nom_etablissement": "Lycée Jacques Decour", "code_uai": "0750668U", "adresse": "12 AVENUE TRUDAINE, 75009 Paris 9e Arrondissement", "nb_colleges": 19, "colleges": ["AIME CESAIRE", "CHAPTAL", "DANIEL MAYER", "GEORGES CLEMENCEAU", "GEORGES MELIES", "GERARD PHILIPE", "JACQUES DECOUR", "JEAN-BAPTISTE POQUELIN", "JULES FERRY", "LAMARTINE", "LOUISE MICHEL", "MARIE CURIE", "MARX DORMOY", "MAURICE UTRILLO", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "ROLAND DORGELES", "YVONNE LE TAC"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3290972094750506, 48.884073919064974]}, "properties": {"lycee_csv": "J. FERRY", "nom_etablissement": "Lycée Jules Ferry", "code_uai": "0750669V", "adresse": "77 boulevard DE CLICHY, 75009 Paris 9e Arrondissement", "nb_colleges": 14, "colleges": ["AIME CESAIRE", "ANTOINE COYSEVOX", "DANIEL MAYER", "FRANCOISE SELIGMANN", "GEORGES CLEMENCEAU", "GEORGES MELIES", "HECTOR BERLIOZ", "HONORE DE BALZAC", "JACQUES DECOUR", "JULES FERRY", "ROLAND DORGELES", "STEPHANE MALLARME", "W.A. MOZART", "YVONNE LE TAC"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.2673239824680143, 48.847305146907075]}, "properties": {"lycee_csv": "J.B. SAY", "nom_etablissement": "Lycée Jean-Baptiste Say", "code_uai": "0750700D", "adresse": "11 bis rue D'AUTEUIL, 75016 Paris 16e Arrondissement", "nb_colleges": 9, "colleges": ["ANDRE CITROEN", "CAMILLE SEE", "CLAUDE BERNARD", "GUILLAUME APOLLINAIRE", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MODIGLIANI", "MOLIERE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.349088600466694, 48.8783808876197]}, "properties": {"lycee_csv": "LAMARTINE", "nom_etablissement": "Lycée Alphonse de Lamartine", "code_uai": "0750670W", "adresse": "121 RUE DU FG POISSONNIERE, 75009 Paris 9e Arrondissement", "nb_colleges": 21, "colleges": ["ANDRE MALRAUX", "BERNARD PALISSY", "CHARLES PEGUY", "DANIEL MAYER", "EDGAR VARESE", "EDMOND MICHELET", "GEORGES BRASSENS", "GEORGES CLEMENCEAU", "GEORGES MELIES", "GERARD PHILIPE", "JEAN-BAPTISTE POQUELIN", "LA GRANGE AUX BELLES", "LAMARTINE", "LOUISE MICHEL", "MARIE CURIE", "MAURICE UTRILLO", "PAUL GAUGUIN", "ROLAND DORGELES", "SONIA DELAUNAY", "SUZANNE LACORE", "W.A. MOZART"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3392948133354463, 48.84235506126977]}, "properties": {"lycee_csv": "LAVOISIER", "nom_etablissement": "Lycée Lavoisier", "code_uai": "0750656F", "adresse": "17 rue Henri Barbusse, 75005 Paris 5e Arrondissement", "nb_colleges": 15, "colleges": ["ALPHONSE DAUDET", "BERNARD PALISSY", "CAMILLE CLAUDEL", "ELSA TRIOLET", "FRANCOIS COUPERIN", "GEORGES BRAQUE", "HENRI IV", "JEAN MOULIN", "LAVOISIER", "MONTAIGNE", "MONTGOLFIER", "PAUL BERT", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.2721249445436613, 48.855000626527904]}, "properties": {"lycee_csv": "MOLIERE", "nom_etablissement": "Lycée Molière", "code_uai": "0750703G", "adresse": "71 RUE DU RANELAGH, 75016 Paris 16e Arrondissement", "nb_colleges": 9, "colleges": ["ANDRE CITROEN", "CAMILLE SEE", "CLAUDE BERNARD", "CLAUDE DEBUSSY", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "JULES ROMAINS", "MOLIERE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3348315716616432, 48.844236978189386]}, "properties": {"lycee_csv": "MONTAIGNE", "nom_etablissement": "Lycée Montaigne", "code_uai": "0750657G", "adresse": "17 RUE AUGUSTE COMTE, 75006 Paris 6e Arrondissement", "nb_colleges": 12, "colleges": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "ELSA TRIOLET", "JACQUES PREVERT", "JEAN MOULIN", "LAVOISIER", "MONTAIGNE", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "SAINT-EXUPERY", "VICTOR DURUY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.4091788098407485, 48.83984177110137]}, "properties": {"lycee_csv": "P. VALERY", "nom_etablissement": "Lycée Paul Valéry", "code_uai": "0750679F", "adresse": "38 boulevard SOULT, 75012 Paris 12e Arrondissement", "nb_colleges": 16, "colleges": ["CAMILLE CLAUDEL", "GABRIEL FAURE", "GEORGES COURTELINE", "GERMAINE TILLION", "GUSTAVE FLAUBERT", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PILATRE DE ROZIER", "THOMAS MANN"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.328867020425414, 48.84088231184501]}, "properties": {"lycee_csv": "PAUL BERT", "nom_etablissement": "Lycée Paul Bert", "code_uai": "0750689S", "adresse": "7 rue Huyghens, 75014 Paris 14e Arrondissement", "nb_colleges": 18, "colleges": ["ALPHONSE DAUDET", "BUFFON", "CLAUDE MONET", "FRANCOIS VILLON", "GEORGE SAND", "GEORGES DUHAMEL", "HENRI IV", "JACQUES PREVERT", "JEAN MOULIN", "JULES ROMAINS", "LAVOISIER", "MONTAIGNE", "MOULIN DES PRES", "PAUL BERT", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY", "VICTOR DURUY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3457450604779764, 48.89923870514318]}, "properties": {"lycee_csv": "RABELAIS", "nom_etablissement": "Lycée François Rabelais", "code_uai": "0750688R", "adresse": "9 rue Francis de Croisset, 75018 Paris 18e Arrondissement", "nb_colleges": 11, "colleges": ["ANTOINE COYSEVOX", "BORIS VIAN", "GEORGES CLEMENCEAU", "GERARD PHILIPE", "HECTOR BERLIOZ", "HONORE DE BALZAC", "JULES FERRY", "MARIE CURIE", "MAURICE UTRILLO", "ROLAND DORGELES", "STEPHANE MALLARME"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.322300419725228, 48.8764506501621]}, "properties": {"lycee_csv": "RACINE", "nom_etablissement": "Lycée Racine", "code_uai": "0750664P", "adresse": "20 rue DU ROCHER, 75008 Paris 8e Arrondissement", "nb_colleges": 14, "colleges": ["ANTOINE COYSEVOX", "CONDORCET", "EDMOND MICHELET", "GERARD PHILIPE", "HECTOR BERLIOZ", "HONORE DE BALZAC", "LA ROSE BLANCHE", "LAMARTINE", "MARIE CURIE", "MARX DORMOY", "OCTAVE GREARD", "PAUL GAUGUIN", "STEPHANE MALLARME", "YVONNE LE TAC"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.408337842697979, 48.847671009915615]}, "properties": {"lycee_csv": "RAVEL", "nom_etablissement": "Lycée Maurice Ravel", "code_uai": "0750715V", "adresse": "89 cours DE VINCENNES, 75020 Paris 20e Arrondissement", "nb_colleges": 17, "colleges": ["FLORA TRISTAN", "GEORGES COURTELINE", "GEORGES ROUAULT", "GERMAINE TILLION", "GUY FLAVIEN", "HENRI MATISSE", "JEAN PERRIN", "JEAN-BAPTISTE CLEMENT", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LEON GAMBETTA", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PAUL VERLAINE", "PIERRE MENDES FRANCE", "PILATRE DE ROZIER"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.347148550517291, 48.83256989645171]}, "properties": {"lycee_csv": "RODIN", "nom_etablissement": "Lycée Rodin", "code_uai": "0750682J", "adresse": "19 RUE CORVISART, 75013 Paris 13e Arrondissement", "nb_colleges": 18, "colleges": ["BUFFON", "CAMILLE CLAUDEL", "CLAUDE MONET", "DE STAEL", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GEORGES DUHAMEL", "GUSTAVE FLAUBERT", "HENRI IV", "LAVOISIER", "MOULIN DES PRES", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.358196233724338, 48.85485829556443]}, "properties": {"lycee_csv": "S. GERMAIN", "nom_etablissement": "Lycée Sophie Germain", "code_uai": "0750653C", "adresse": "9 rue DE JOUY, 75004 Paris 4e Arrondissement", "nb_colleges": 17, "colleges": ["ALAIN FOURNIER", "BEAUMARCHAIS", "CHARLEMAGNE", "CHARLES PEGUY", "CLAUDE CHAPPE", "CLAUDE MONET", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "GERMAINE TILLION", "GUILLAUME BUDE", "GUSTAVE FLAUBERT", "JEAN-BAPTISTE POQUELIN", "MAURICE RAVEL", "MONTGOLFIER", "PAUL VERLAINE", "PIERRE ALVISET", "VICTOR HUGO"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3640346171235267, 48.86135218900356]}, "properties": {"lycee_csv": "S. WEIL", "nom_etablissement": "Lycée polyvalent Simone Weil", "code_uai": "0750651A", "adresse": "7 rue de Poitou, 75003 Paris 3e Arrondissement", "nb_colleges": 10, "colleges": ["ALAIN FOURNIER", "ANNE FRANK", "CESAR FRANCK", "CHARLEMAGNE", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "JEAN-FRANCOIS OEBEN", "MONTGOLFIER", "PIERRE-JEAN DE BERANGER", "VICTOR HUGO"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.358843148100717, 48.86619264109878]}, "properties": {"lycee_csv": "TURGOT", "nom_etablissement": "Lycée Turgot", "code_uai": "0750647W", "adresse": "69 rue de Turbigo, 75003 Paris 3e Arrondissement", "nb_colleges": 16, "colleges": ["ALAIN FOURNIER", "BERNARD PALISSY", "CESAR FRANCK", "CLAUDE CHAPPE", "EDGAR VARESE", "EDOUARD PAILLERON", "FRANCOISE SELIGMANN", "GEORGES BRASSENS", "GUILLAUME BUDE", "HENRI BERGSON", "JEAN-BAPTISTE CLEMENT", "LEON GAMBETTA", "MONTGOLFIER", "ROBERT DOISNEAU", "VALMY", "VOLTAIRE"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.3148477839827657, 48.85230029234186]}, "properties": {"lycee_csv": "V. DURUY", "nom_etablissement": "Lycée Victor Duruy", "code_uai": "0750662M", "adresse": "33 BOULEVARD DES INVALIDES, 75007 Paris 7e Arrondissement", "nb_colleges": 13, "colleges": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "BUFFON", "CLAUDE DEBUSSY", "DE STAEL", "FRANCOIS VILLON", "GEORGES DUHAMEL", "GUILLAUME APOLLINAIRE", "JACQUES PREVERT", "JEAN MOULIN", "JULES ROMAINS", "MODIGLIANI", "VICTOR DURUY"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.363169676401168, 48.85751187081702]}, "properties": {"lycee_csv": "V. HUGO", "nom_etablissement": "Lycée Victor Hugo", "code_uai": "0750648X", "adresse": "27 rue de Sévigné, 75003 Paris 3e Arrondissement", "nb_colleges": 12, "colleges": ["ANNE FRANK", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "HELENE BOUCHER", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LOUISE MICHEL", "LUCIE ET RAYMOND AUBRAC", "PAUL VALERY", "PAUL VERLAINE", "VICTOR HUGO"]}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [2.384525602087465, 48.86352601850053]}, "properties": {"lycee_csv": "VOLTAIRE", "nom_etablissement": "Lycée Voltaire", "code_uai": "0750675B", "adresse": "101 avenue de la République, 75011 Paris 11e Arrondissement", "nb_colleges": 21, "colleges": ["ALAIN FOURNIER", "BEAUMARCHAIS", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "FLORA TRISTAN", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "FRANCOISE SELIGMANN", "JEAN-BAPTISTE CLEMENT", "LA GRANGE AUX BELLES", "LEON GAMBETTA", "LUCIE ET RAYMOND AUBRAC", "MONTGOLFIER", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "PILATRE DE ROZIER", "ROBERT DOISNEAU", "VALMY", "VICTOR HUGO", "VOLTAIRE"]}}]};
  const LYCEE_TO_COLLEGES = {"ARAGO": ["ANNE FRANK", "BEAUMARCHAIS", "FLORA TRISTAN", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VERLAINE", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "PILATRE DE ROZIER", "ROBERT DOISNEAU", "THOMAS MANN"], "BALZAC": ["ANTOINE COYSEVOX", "BORIS VIAN", "CARNOT", "HECTOR BERLIOZ", "HONORE DE BALZAC", "LA ROSE BLANCHE", "MAURICE UTRILLO", "PIERRE DE RONSARD", "STEPHANE MALLARME", "SUZANNE LACORE"], "BERGSON": ["CHARLES PEGUY", "CLAUDE CHAPPE", "EDMOND MICHELET", "EDOUARD PAILLERON", "FRANCOISE DOLTO", "FRANCOISE SELIGMANN", "GEORGES BRASSENS", "GEORGES MELIES", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "LEON GAMBETTA", "LUCIE ET RAYMOND AUBRAC", "SONIA DELAUNAY", "VALMY", "W.A. MOZART"], "BOUCHER": ["ANNE FRANK", "CHARLES PEGUY", "COLETTE BESSON", "FLORA TRISTAN", "FRANCOISE DOLTO", "GEORGES COURTELINE", "GEORGES ROUAULT", "GERMAINE TILLION", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-BAPTISTE CLEMENT", "LEON GAMBETTA", "LUCIE FAURE", "PAUL VALERY", "PIERRE MENDES FRANCE", "PILATRE DE ROZIER"], "BUFFON": ["ALBERTO GIACOMETTI", "ANDRE CITROEN", "BUFFON", "CAMILLE SEE", "CLAUDE DEBUSSY", "DE STAEL", "ELSA TRIOLET", "FRANCOIS VILLON", "GEORGE SAND", "GEORGES DUHAMEL", "GUILLAUME APOLLINAIRE", "JULES ROMAINS", "MODIGLIANI", "MOULIN DES PRES", "VICTOR DURUY"], "C. BERNARD": ["CAMILLE SEE", "CLAUDE BERNARD", "CLAUDE DEBUSSY", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"], "C. MONET": ["CAMILLE CLAUDEL", "CLAUDE MONET", "ELSA TRIOLET", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GUSTAVE FLAUBERT", "MOULIN DES PRES", "RODIN", "THOMAS MANN"], "CAMILLE SEE": ["ALBERTO GIACOMETTI", "ANDRE CITROEN", "BUFFON", "CAMILLE SEE", "CLAUDE DEBUSSY", "DE STAEL", "FRANCOIS VILLON", "GEORGES DUHAMEL", "JACQUES PREVERT", "JULES ROMAINS", "MODIGLIANI", "MONTAIGNE", "VICTOR DURUY"], "CARNOT": ["ANDRE MALRAUX", "BORIS VIAN", "CARNOT", "CHAPTAL", "JACQUES DECOUR", "LA ROSE BLANCHE", "MAURICE UTRILLO", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "STEPHANE MALLARME", "YVONNE LE TAC"], "CHAPTAL": ["AIME CESAIRE", "BORIS VIAN", "CARNOT", "CHAPTAL", "CONDORCET", "EDOUARD PAILLERON", "GEORGES CLEMENCEAU", "HENRI BERGSON", "JACQUES DECOUR", "JULES FERRY", "LA GRANGE AUX BELLES", "MARX DORMOY", "OCTAVE GREARD", "PIERRE DE RONSARD", "ROLAND DORGELES", "SONIA DELAUNAY"], "CHARLEMAGNE": ["BEAUMARCHAIS", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "EVARISTE GALOIS", "FRANCOIS COUPERIN", "GABRIEL FAURE", "GEORGES COURTELINE", "HENRI IV", "JEAN-BAPTISTE POQUELIN", "LUCIE ET RAYMOND AUBRAC", "PIERRE ALVISET", "PIERRE-JEAN DE BERANGER", "ROBERT DOISNEAU", "VOLTAIRE"], "COLBERT": ["AIME CESAIRE", "BEAUMARCHAIS", "CLAUDE CHAPPE", "COLETTE BESSON", "CONDORCET", "DANIEL MAYER", "EDGAR VARESE", "EDMOND MICHELET", "EDOUARD PAILLERON", "FRANCOISE SELIGMANN", "GEORGES MELIES", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "JEAN-BAPTISTE CLEMENT", "JEAN-BAPTISTE POQUELIN", "LA GRANGE AUX BELLES", "LAMARTINE", "LOUISE MICHEL", "LUCIE ET RAYMOND AUBRAC", "MARX DORMOY", "SONIA DELAUNAY", "SUZANNE LACORE", "VALMY", "VOLTAIRE", "W.A. MOZART"], "CONDORCET": ["AIME CESAIRE", "ANDRE MALRAUX", "ANTOINE COYSEVOX", "CONDORCET", "DANIEL MAYER", "EDMOND MICHELET", "GERARD PHILIPE", "HECTOR BERLIOZ", "JULES FERRY", "LA ROSE BLANCHE", "LAMARTINE", "MARIE CURIE", "SUZANNE LACORE"], "DIDEROT": ["CHARLES PEGUY", "CLAUDE CHAPPE", "EDGAR VARESE", "EDOUARD PAILLERON", "FLORA TRISTAN", "GEORGES BRASSENS", "GEORGES ROUAULT", "GUILLAUME BUDE", "HENRI BERGSON", "LOUISE MICHEL", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "SUZANNE LACORE", "W.A. MOZART"], "DORIAN": ["ALAIN FOURNIER", "ANNE FRANK", "GEORGES COURTELINE", "GERMAINE TILLION", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PAUL VERLAINE", "ROBERT DOISNEAU", "VOLTAIRE"], "E. DUBOIS": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "EVARISTE GALOIS", "FRANCOIS VILLON", "GEORGES BRAQUE", "JEAN MOULIN", "MODIGLIANI", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "SAINT-EXUPERY"], "E. QUINET": ["ANDRE MALRAUX", "BERNARD PALISSY", "CARNOT", "CHAPTAL", "CONDORCET", "JACQUES DECOUR", "LA ROSE BLANCHE", "MARX DORMOY", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "YVONNE LE TAC"], "FENELON": ["BERNARD PALISSY", "EDGAR VARESE", "GEORGES BRASSENS", "HENRI IV", "JACQUES PREVERT", "LA GRANGE AUX BELLES", "LAVOISIER", "MONTAIGNE", "SONIA DELAUNAY", "THOMAS MANN", "VALMY", "VICTOR HUGO"], "G.FAURE": ["CAMILLE CLAUDEL", "CLAUDE MONET", "ELSA TRIOLET", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GUSTAVE FLAUBERT", "MOULIN DES PRES", "RODIN", "THOMAS MANN"], "J. DE LA FONTAINE": ["ANDRE CITROEN", "CLAUDE BERNARD", "GUILLAUME APOLLINAIRE", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"], "J. DE SAILLY": ["ANDRE MALRAUX", "BORIS VIAN", "CARNOT", "CHAPTAL", "CLAUDE BERNARD", "DE STAEL", "GUILLAUME APOLLINAIRE", "HONORE DE BALZAC", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MOLIERE"], "J. DECOUR": ["AIME CESAIRE", "CHAPTAL", "DANIEL MAYER", "GEORGES CLEMENCEAU", "GEORGES MELIES", "GERARD PHILIPE", "JACQUES DECOUR", "JEAN-BAPTISTE POQUELIN", "JULES FERRY", "LAMARTINE", "LOUISE MICHEL", "MARIE CURIE", "MARX DORMOY", "MAURICE UTRILLO", "OCTAVE GREARD", "PAUL GAUGUIN", "PIERRE DE RONSARD", "ROLAND DORGELES", "YVONNE LE TAC"], "J. FERRY": ["AIME CESAIRE", "ANTOINE COYSEVOX", "DANIEL MAYER", "FRANCOISE SELIGMANN", "GEORGES CLEMENCEAU", "GEORGES MELIES", "HECTOR BERLIOZ", "HONORE DE BALZAC", "JACQUES DECOUR", "JULES FERRY", "ROLAND DORGELES", "STEPHANE MALLARME", "W.A. MOZART", "YVONNE LE TAC"], "J.B. SAY": ["ANDRE CITROEN", "CAMILLE SEE", "CLAUDE BERNARD", "GUILLAUME APOLLINAIRE", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "MODIGLIANI", "MOLIERE"], "LAMARTINE": ["ANDRE MALRAUX", "BERNARD PALISSY", "CHARLES PEGUY", "DANIEL MAYER", "EDGAR VARESE", "EDMOND MICHELET", "GEORGES BRASSENS", "GEORGES CLEMENCEAU", "GEORGES MELIES", "GERARD PHILIPE", "JEAN-BAPTISTE POQUELIN", "LA GRANGE AUX BELLES", "LAMARTINE", "LOUISE MICHEL", "MARIE CURIE", "MAURICE UTRILLO", "PAUL GAUGUIN", "ROLAND DORGELES", "SONIA DELAUNAY", "SUZANNE LACORE", "W.A. MOZART"], "LAVOISIER": ["ALPHONSE DAUDET", "BERNARD PALISSY", "CAMILLE CLAUDEL", "ELSA TRIOLET", "FRANCOIS COUPERIN", "GEORGES BRAQUE", "HENRI IV", "JEAN MOULIN", "LAVOISIER", "MONTAIGNE", "MONTGOLFIER", "PAUL BERT", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY"], "MOLIERE": ["ANDRE CITROEN", "CAMILLE SEE", "CLAUDE BERNARD", "CLAUDE DEBUSSY", "JANSON DE SAILLY", "JEAN DE LA FONTAINE", "JEAN-BAPTISTE SAY", "JULES ROMAINS", "MOLIERE"], "MONTAIGNE": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "ELSA TRIOLET", "JACQUES PREVERT", "JEAN MOULIN", "LAVOISIER", "MONTAIGNE", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "SAINT-EXUPERY", "VICTOR DURUY"], "P. VALERY": ["CAMILLE CLAUDEL", "GABRIEL FAURE", "GEORGES COURTELINE", "GERMAINE TILLION", "GUSTAVE FLAUBERT", "GUY FLAVIEN", "HELENE BOUCHER", "HENRI MATISSE", "JEAN PERRIN", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PILATRE DE ROZIER", "THOMAS MANN"], "PAUL BERT": ["ALPHONSE DAUDET", "BUFFON", "CLAUDE MONET", "FRANCOIS VILLON", "GEORGE SAND", "GEORGES DUHAMEL", "HENRI IV", "JACQUES PREVERT", "JEAN MOULIN", "JULES ROMAINS", "LAVOISIER", "MONTAIGNE", "MOULIN DES PRES", "PAUL BERT", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY", "VICTOR DURUY"], "RABELAIS": ["ANTOINE COYSEVOX", "BORIS VIAN", "GEORGES CLEMENCEAU", "GERARD PHILIPE", "HECTOR BERLIOZ", "HONORE DE BALZAC", "JULES FERRY", "MARIE CURIE", "MAURICE UTRILLO", "ROLAND DORGELES", "STEPHANE MALLARME"], "RACINE": ["ANTOINE COYSEVOX", "CONDORCET", "EDMOND MICHELET", "GERARD PHILIPE", "HECTOR BERLIOZ", "HONORE DE BALZAC", "LA ROSE BLANCHE", "LAMARTINE", "MARIE CURIE", "MARX DORMOY", "OCTAVE GREARD", "PAUL GAUGUIN", "STEPHANE MALLARME", "YVONNE LE TAC"], "RAVEL": ["FLORA TRISTAN", "GEORGES COURTELINE", "GEORGES ROUAULT", "GERMAINE TILLION", "GUY FLAVIEN", "HENRI MATISSE", "JEAN PERRIN", "JEAN-BAPTISTE CLEMENT", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LEON GAMBETTA", "LUCIE FAURE", "MAURICE RAVEL", "PAUL VALERY", "PAUL VERLAINE", "PIERRE MENDES FRANCE", "PILATRE DE ROZIER"], "RODIN": ["BUFFON", "CAMILLE CLAUDEL", "CLAUDE MONET", "DE STAEL", "EVARISTE GALOIS", "GABRIEL FAURE", "GEORGE SAND", "GEORGES BRAQUE", "GEORGES DUHAMEL", "GUSTAVE FLAUBERT", "HENRI IV", "LAVOISIER", "MOULIN DES PRES", "PAUL BERT", "PIERRE ALVISET", "RAYMOND QUENEAU", "RODIN", "SAINT-EXUPERY"], "S. GERMAIN": ["ALAIN FOURNIER", "BEAUMARCHAIS", "CHARLEMAGNE", "CHARLES PEGUY", "CLAUDE CHAPPE", "CLAUDE MONET", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "GERMAINE TILLION", "GUILLAUME BUDE", "GUSTAVE FLAUBERT", "JEAN-BAPTISTE POQUELIN", "MAURICE RAVEL", "MONTGOLFIER", "PAUL VERLAINE", "PIERRE ALVISET", "VICTOR HUGO"], "S. WEIL": ["ALAIN FOURNIER", "ANNE FRANK", "CESAR FRANCK", "CHARLEMAGNE", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "JEAN-FRANCOIS OEBEN", "MONTGOLFIER", "PIERRE-JEAN DE BERANGER", "VICTOR HUGO"], "TURGOT": ["ALAIN FOURNIER", "BERNARD PALISSY", "CESAR FRANCK", "CLAUDE CHAPPE", "EDGAR VARESE", "EDOUARD PAILLERON", "FRANCOISE SELIGMANN", "GEORGES BRASSENS", "GUILLAUME BUDE", "HENRI BERGSON", "JEAN-BAPTISTE CLEMENT", "LEON GAMBETTA", "MONTGOLFIER", "ROBERT DOISNEAU", "VALMY", "VOLTAIRE"], "V. DURUY": ["ALBERTO GIACOMETTI", "ALPHONSE DAUDET", "BUFFON", "CLAUDE DEBUSSY", "DE STAEL", "FRANCOIS VILLON", "GEORGES DUHAMEL", "GUILLAUME APOLLINAIRE", "JACQUES PREVERT", "JEAN MOULIN", "JULES ROMAINS", "MODIGLIANI", "VICTOR DURUY"], "V. HUGO": ["ANNE FRANK", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "HELENE BOUCHER", "JEAN-FRANCOIS OEBEN", "JULES VERNE", "LOUISE MICHEL", "LUCIE ET RAYMOND AUBRAC", "PAUL VALERY", "PAUL VERLAINE", "VICTOR HUGO"], "VOLTAIRE": ["ALAIN FOURNIER", "BEAUMARCHAIS", "CESAR FRANCK", "CHARLEMAGNE", "COLETTE BESSON", "FLORA TRISTAN", "FRANCOIS COUPERIN", "FRANCOISE DOLTO", "FRANCOISE SELIGMANN", "JEAN-BAPTISTE CLEMENT", "LA GRANGE AUX BELLES", "LEON GAMBETTA", "LUCIE ET RAYMOND AUBRAC", "MONTGOLFIER", "PIERRE MENDES FRANCE", "PIERRE-JEAN DE BERANGER", "PILATRE DE ROZIER", "ROBERT DOISNEAU", "VALMY", "VICTOR HUGO", "VOLTAIRE"]};

  const map = L.map('map', { center: [48.8566, 2.3522], zoom: 12 });
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; OpenStreetMap contributors'
  }).addTo(map);

  function escapeHtml(s) {
    return String(s).replace(/[&<>"']/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[c]));
  }

  function popupHtml(p) {
    const cols = p.colleges || [];
    const items = cols.map(c => `<li>${escapeHtml(c)}</li>`).join("");
    return `
      <div style="max-width:360px;">
        <div style="font-weight:800; margin-bottom:4px;">${escapeHtml(p.lycee_csv)}</div>
        <div style="font-size:12px; color:#555;">
          ${escapeHtml(p.nom_etablissement || "")}<br/>
          <span style="color:#666;">${escapeHtml(p.adresse || "")}</span><br/>
          <span style="color:#666;">UAI: ${escapeHtml(p.code_uai || "")}</span>
        </div>
        <div style="font-size:12px; color:#555; margin-top:8px;">Collèges secteur 1 (n=${cols.length})</div>
        <ul style="margin:6px 0 0; padding-left:18px; max-height:220px; overflow:auto;">${items}</ul>
      </div>`;
  }

  const markersByLycee = new Map();
  const layer = L.geoJSON(GEO, {
    pointToLayer: (feature, latlng) => L.marker(latlng),
    onEachFeature: (feature, leafletLayer) => {
      const p = feature.properties;
      leafletLayer.bindPopup(popupHtml(p));
      markersByLycee.set((p.lycee_csv || "").toUpperCase(), { layer: leafletLayer, props: p });
    }
  }).addTo(map);

  try {
    const b = layer.getBounds();
    if (b.isValid()) map.fitBounds(b.pad(0.08));
  } catch(e){}

  const listEl = document.getElementById("list");
  const filterEl = document.getElementById("filter");
  const optAutoPopup = document.getElementById("optAutoPopup");
  const optInlineMissing = document.getElementById("optInlineMissing");
  const allLycees = Object.keys(LYCEE_TO_COLLEGES).sort((a,b)=>a.localeCompare(b,'fr'));

  function collegesInlineHtml(lycee) {
    const cols = (LYCEE_TO_COLLEGES[lycee] || []);
    if (!cols.length) return "";
    const items = cols.map(c => `<li>${escapeHtml(c)}</li>`).join("");
    return `<ul style="margin-top:8px; max-height:160px; overflow:auto;">${items}</ul>`;
  }

  function isMobile() {
    return window.matchMedia && window.matchMedia("(max-width: 900px)").matches;
  }

  function maybeCollapseAfterPick() {
    if (isMobile()) setSheetCollapsed(true);
  }

  function renderList() {
    const q = (filterEl.value || "").trim().toUpperCase();
    listEl.innerHTML = "";

    const shown = allLycees.filter(l => !q || l.toUpperCase().includes(q));
    document.getElementById("countShown").textContent = shown.length;
    document.getElementById("countTotal").textContent = allLycees.length;

    if (!shown.length) {
      listEl.innerHTML = `<div class="hint">Aucun lycée ne correspond au filtre.</div>`;
      return;
    }

    for (const lycee of shown) {
      const m = markersByLycee.get(lycee.toUpperCase());
      const hasGeo = !!m;

      const cols = LYCEE_TO_COLLEGES[lycee] || [];
      const div = document.createElement("div");
      div.className = "card";

      const inlineCols = (!hasGeo && optInlineMissing.checked) ? collegesInlineHtml(lycee) : "";

      div.innerHTML = `
        <strong>${escapeHtml(lycee)}</strong>
        <div class="meta">
          ${hasGeo ? '<span class="ok">géolocalisé</span>' : '<span class="warn">non géolocalisé</span>'}
          • collèges: ${cols.length}
        </div>
        <div class="row" style="margin-top:10px;">
          <button data-action="focus" ${hasGeo ? "" : "disabled"}>Centrer</button>
          <button data-action="open" ${hasGeo ? "" : "disabled"}>Ouvrir</button>
        </div>
        ${inlineCols}
      `;

      const btnFocus = div.querySelector('[data-action="focus"]');
      const btnOpen = div.querySelector('[data-action="open"]');

      if (hasGeo) {
        const openLycee = (openPopup) => {
          const ll = m.layer.getLatLng();
          map.setView(ll, 14);
          if (openPopup && optAutoPopup.checked) m.layer.openPopup();
          maybeCollapseAfterPick();
        };

        btnFocus.addEventListener("click", () => openLycee(true));
        btnOpen.addEventListener("click", () => { 
          const ll = m.layer.getLatLng();
          map.setView(ll, 14);
          m.layer.openPopup();
          maybeCollapseAfterPick();
        });

        const title = div.querySelector("strong");
        title.style.cursor = "pointer";
        title.addEventListener("click", () => openLycee(true));
      }

      listEl.appendChild(div);
    }
  }

  // Marker click behavior (Option 1) + keep map visible on mobile
  for (const v of markersByLycee.values()) {
    v.layer.on("click", () => {
      if (optAutoPopup.checked) v.layer.openPopup();
      if (isMobile()) setSheetCollapsed(true);
    });
  }

  document.getElementById("reset").addEventListener("click", () => {
    filterEl.value = "";
    renderList();
  });
  filterEl.addEventListener("input", renderList);
  optInlineMissing.addEventListener("change", renderList);

  // Bottom sheet controls
  const sidebar = document.getElementById("sidebar");
  const btnCollapse = document.getElementById("btnCollapse");
  const toggleSheet = document.getElementById("toggleSheet");
  const grabber = document.getElementById("grabber");
  const btnLocate = document.getElementById("btnLocate");

  function setSheetCollapsed(collapsed) {
    if (!isMobile()) {
      sidebar.classList.remove("collapsed");
      btnCollapse.textContent = "▴";
      return;
    }
    sidebar.classList.toggle("collapsed", collapsed);
    btnCollapse.textContent = collapsed ? "▴" : "▾";
    if (!collapsed) {
      setTimeout(() => { try { filterEl.focus(); } catch(e){} }, 50);
    }
    setTimeout(() => map.invalidateSize(), 80);
  }

  function toggleCollapsed() {
    setSheetCollapsed(!sidebar.classList.contains("collapsed"));
  }

  btnCollapse.addEventListener("click", toggleCollapsed);
  toggleSheet.addEventListener("click", toggleCollapsed);
  grabber.addEventListener("click", toggleCollapsed);

  btnLocate.addEventListener("click", () => {
    map.setView([48.8566, 2.3522], 12);
    if (isMobile()) setSheetCollapsed(true);
  });

  function syncLayout() {
    if (isMobile()) setSheetCollapsed(true);
    else setSheetCollapsed(false);
    setTimeout(() => map.invalidateSize(), 120);
  }
  window.addEventListener("resize", syncLayout);

  map.on("click", () => { if (isMobile()) setSheetCollapsed(true); });

  renderList();
  syncLayout();
</script>
</body>
</html>
